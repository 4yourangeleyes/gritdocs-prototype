#!/bin/bash
# Real Google OAuth Setup Script

echo "üîë Setting Up Real Google OAuth Credentials"
echo "==========================================="

echo ""
echo "üìã Step-by-Step Guide:"
echo "======================"

echo ""
echo "1Ô∏è‚É£  CREATE GOOGLE CLOUD PROJECT"
echo "-------------------------------"
echo "‚Ä¢ Open: https://console.cloud.google.com/"
echo "‚Ä¢ Click 'Select a project' dropdown (top bar)"
echo "‚Ä¢ Click 'New Project'"
echo "‚Ä¢ Project name: 'GritDocs' (or similar)"
echo "‚Ä¢ Click 'Create'"
echo "‚Ä¢ Wait for project creation (30 seconds)"

echo ""
echo "2Ô∏è‚É£  ENABLE GOOGLE+ API"
echo "----------------------"
echo "‚Ä¢ Go to: APIs & Services > Library"
echo "‚Ä¢ Search: 'Google+ API'"
echo "‚Ä¢ Click on 'Google+ API'"
echo "‚Ä¢ Click 'Enable'"

echo ""
echo "3Ô∏è‚É£  CREATE OAUTH CONSENT SCREEN"
echo "-------------------------------"
echo "‚Ä¢ Go to: APIs & Services > OAuth consent screen"
echo "‚Ä¢ Choose: 'External' (for public use)"
echo "‚Ä¢ Click 'Create'"
echo "‚Ä¢ Fill required fields:"
echo "  - App name: 'GritDocs'"
echo "  - User support email: your-email@example.com"
echo "  - Developer contact: your-email@example.com"
echo "‚Ä¢ Click 'Save and Continue'"
echo "‚Ä¢ Skip Scopes page (click 'Save and Continue')"
echo "‚Ä¢ Skip Test users page (click 'Save and Continue')"

echo ""
echo "4Ô∏è‚É£  CREATE OAUTH CREDENTIALS"
echo "----------------------------"
echo "‚Ä¢ Go to: APIs & Services > Credentials"
echo "‚Ä¢ Click 'Create Credentials'"
echo "‚Ä¢ Choose 'OAuth 2.0 Client ID'"
echo "‚Ä¢ Application type: 'Web application'"
echo "‚Ä¢ Name: 'GritDocs Production'"

echo ""
echo "5Ô∏è‚É£  CONFIGURE AUTHORIZED URLS"
echo "-----------------------------"
echo "Add these EXACT URLs:"

echo ""
echo "Authorized JavaScript origins:"
echo "https://fopyamyrykwtlwgefxuq.supabase.co"

echo ""
echo "Authorized redirect URIs:"
echo "https://fopyamyrykwtlwgefxuq.supabase.co/auth/v1/callback"

echo ""
echo "‚Ä¢ Click 'Create'"

echo ""
echo "6Ô∏è‚É£  COPY YOUR CREDENTIALS"
echo "------------------------"
echo "You'll get a popup with:"
echo "‚Ä¢ Client ID: 123456789012-abc...xyz.apps.googleusercontent.com"
echo "‚Ä¢ Client secret: GOCSPX-AbC...XyZ"
echo ""
echo "üìù COPY BOTH - you'll need them for Supabase!"

echo ""
echo "7Ô∏è‚É£  ADD TO SUPABASE"
echo "------------------"
echo "‚Ä¢ Open: https://supabase.com/dashboard/project/fopyamyrykwtlwgefxuq/auth/providers"
echo "‚Ä¢ Click 'Google'"
echo "‚Ä¢ Paste Client ID"
echo "‚Ä¢ Paste Client Secret"
echo "‚Ä¢ Toggle 'Enable Google provider' ON"
echo "‚Ä¢ Click 'Save'"

echo ""
echo "‚úÖ EXPECTED RESULT"
echo "-----------------"
echo "‚Ä¢ No more 'missing OAuth secret' error"
echo "‚Ä¢ Google sign-in popup works"
echo "‚Ä¢ Users can authenticate with Google"
echo "‚Ä¢ Automatic profile creation"

echo ""
echo "üöÄ Ready to proceed!"
echo ""
echo "Current steps:"
echo "1. Create Google Cloud project ‚Üê START HERE"
echo "2. Enable Google+ API"
echo "3. Set up OAuth consent screen"  
echo "4. Create OAuth credentials"
echo "5. Add credentials to Supabase"